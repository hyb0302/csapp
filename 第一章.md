#### Amdahl 定律

对系统中的一部分做优化加速时，总体加速效果取决于这个部分占整个系统的比重和加速程度

这里我刚开始有点难理解的是，为什么优化过后的时间是 α * T <sub>old</sub> / k

然后我代入了个例子就明白了



先总体过一遍

总时长 T<sub>old</sub> 10s

α = 70%，可加速部分 α * T<sub>old</sub>  = 7s

k = 200%，该部分提升比例      

α * T<sub>old</sub> / k = 7 / 200% = 3.5s，该部分优化提升后的时间

下面是计算优化提升了该部分后，整个系统的时间

T(new) = (1-α) * T<sub>old</sub> + α * T<sub>old</sub> / k

​			 = T<sub>old</sub> * (1- α + α / k)

代入上面计算好的优化过后的系统时间 T<sub>new</sub>

加速比 S = T<sub>old</sub> / T<sub>new</sub>

​				= T<sub>old</sub> / T<sub>old</sub> * (1- α + α / k)

​                = 1 / (1- α + α / k)

10 / 6.5 = 1.538

加速比代入公式

1 / (1 - 0.7 + 0.7 / 2)

= 1 / 0.65

= 1.538



**所以为什么优化过后的时间是 α * T <sub>old</sub> / k 呢？**

代入例子，加速程度是 2

k = 200%，k 的计算公式：old / new = k

当前已知 old 和 k，那么就可以算出 new

k = old / new

k * new = old

new = old / k

代入上面的符号定义，就是 α * T<sub>old</sub> / k

我算到这里，仔细一想，就是我以前隐隐感觉到的 打折后的价格 / 折扣 = 原价

比如10块钱打7折，折扣价 7 元，那么 折扣价 / 折扣 就是

7 / 0.7 = 10

那如果是 打 12 折呢，折扣价就是

10 * 1.2 = 12

打折后竟然还更贵了是吧，那么 折扣价 / 折扣 就是

12 / 1.2 = 10

到这里我又有个感觉，这不就是先给一个数除以 x 之后，再用结果乘以 x 么（先乘再除也是一样）？结果肯定是一样的啊

先给一个数除以 x （算出原价）对应着 old / k（算出优化后的时间）

再使用结果乘以 x （算出折扣价）对应着 new * k （算出没优化前的时间）



#### 练习题 1.1

##### A

α = 1500 / 2500 = 0.6

这里 k 的计算是用【旧的速度通过这段路的时间】除以【新速度通过这段路的时间】计算出来的加速提升比例

k =  15 / 10 = 1.5

代入加速比公式 S = 1 / (1- α + α / k)

S = 1 / (1 - 0.6 + 0.6 / 1.5)

S = 1 / 0.8

S = 1.25

##### B

已知 S = 1.67，α = 0.6，求 k

代入公式计算

1.67 = 1 / (1 - 0.6 + 0.6 / k)

1.67 = 1 / (0.4 + 0.6 / k)

 (0.4 + 0.6 / k) * 1.67 = 1

0.668 + 1.002 / k = 1

k = 1.002 / 0.332

k = 3.018

原本是 100 公里/小时，100 * 3.02 = 302 公里/小时



#### 练习题 1.2

已知 S = 2，α = 0.8，求 k

代入公式计算

2 = 1 / (1 - 0.8 + 0.8 / k)

2 = 1 / (0.2 + 0.8 / k)

0.4 + 1.6 / k = 1

1.6 / k = 0.6

k = 1.6 / 0.6

k = 2.667

